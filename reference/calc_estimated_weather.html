<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Calculate estimated weather from coefficients — calc_estimated_weather • epiphytoolR</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate estimated weather from coefficients — calc_estimated_weather"><meta name="description" content="Calculate estimated weather from coefficients"><meta property="og:description" content="Calculate estimated weather from coefficients"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">epiphytoolR</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Calculate estimated weather from coefficients</h1>

      <div class="d-none name"><code>calc_estimated_weather.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Calculate estimated weather from coefficients</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">calc_estimated_weather</span><span class="op">(</span></span>
<span>  <span class="va">w</span>,</span>
<span>  start_date <span class="op">=</span> <span class="st">"2023-04-01"</span>,</span>
<span>  end_date <span class="op">=</span> <span class="st">"2023-11-30"</span>,</span>
<span>  <span class="va">lat</span>,</span>
<span>  <span class="va">lon</span>,</span>
<span>  n_stations <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">4</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-w">w<a class="anchor" aria-label="anchor" href="#arg-w"></a></dt>
<dd><p>A <code>data.table</code> of weather coefficients, output from
<code><a href="get_weather_coefs.html">get_weather_coefs</a></code>`</p></dd>


<dt id="arg-start-date">start_date<a class="anchor" aria-label="anchor" href="#arg-start-date"></a></dt>
<dd><p>a character string of a date value indicating the first date
for in the returning data.table Must be in <acronym>ISO8601</acronym> format (YYYY-MM-DD),
<em>e.g.</em> “2020-04-26”</p></dd>


<dt id="arg-end-date">end_date<a class="anchor" aria-label="anchor" href="#arg-end-date"></a></dt>
<dd><p>a character string of a date value indicating the last date
for in the returning data.table Must be in <acronym>ISO8601</acronym> format (YYYY-MM-DD),
<em>e.g.</em> “2020-04-26”</p></dd>


<dt id="arg-lat">lat<a class="anchor" aria-label="anchor" href="#arg-lat"></a></dt>
<dd><p>numeric, latitude of the query coordinates where weather should be
estimated. If missing all stations will be returned</p></dd>


<dt id="arg-lon">lon<a class="anchor" aria-label="anchor" href="#arg-lon"></a></dt>
<dd><p>numeric, longitude of the query coordinates where weather should be
estimated.  If missing all stations will be returned</p></dd>


<dt id="arg-n-stations">n_stations<a class="anchor" aria-label="anchor" href="#arg-n-stations"></a></dt>
<dd><p>integer or vector of integers indicating the number of station/s
to return from the closest (1), or 3rd closest (3) or closest five stations
(1:5), ect.</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>logical, remove all weather data from stations with NA rain_fall
frequency <strong>Not Recommended</strong>. We advise the best way is to manually remove
weather stations with NAs or correct the weather data. This argument is
available if these two options are not available to the user. Default is
<code>FALSE</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>data.table</code> output of calculated on
<code><a href="get_weather_coefs.html">get_weather_coefs</a></code> with the following columns:
<em>station</em> - Weather station name;
<em>lat</em> - latitude;
<em>lon</em> - longitude;
<em>rh</em> - NA currently not supported see epiphytoolR github issue #14;
<em>yearday</em> - integer, day of the year, see <code><a href="https://rdrr.io/pkg/data.table/man/IDateTime.html" class="external-link">data.table::yday()</a></code>;
<em>wd_rd</em> - numeric, mean wind direction from raw data;
<em>wd_sd_rd</em> - numeric, standard deviation of wind direction from raw data;
<em>ws_rd</em> - numeric, mean wind speed from raw data;
<em>ws_sd_rd</em> - numeric, standard deviation of wind speed from raw data;
<em>rain_freq</em> - numeric, proportional chance of rainfall on this dat 0 - 1</p>
<p>Output can be formatted with <code><a href="format_weather.html">format_weather</a></code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">61</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  station_name <span class="op">=</span> <span class="st">"w_STATION"</span>,</span></span>
<span class="r-in"><span>  lat <span class="op">=</span> <span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">15.5</span>, <span class="fl">28</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  lon <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">115</span>, <span class="fl">150</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  state <span class="op">=</span> <span class="st">"SA"</span>,</span></span>
<span class="r-in"><span>  yearday <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">365</span>,</span></span>
<span class="r-in"><span>  wd_rw <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">365</span>, <span class="fl">180</span>, <span class="fl">90</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  wd_sd_rw <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">365</span>, <span class="fl">80</span>, <span class="fl">20</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ws_rw <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">365</span>, <span class="fl">1</span>, <span class="fl">60</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  ws_sd_rw <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">365</span>, <span class="fl">10</span>, sd <span class="op">=</span> <span class="fl">5</span><span class="op">)</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  rain_freq <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span><span class="fl">365</span>, <span class="fl">0.05</span>, <span class="fl">0.45</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fu">calc_estimated_weather</span><span class="op">(</span>w <span class="op">=</span> <span class="va">dat</span>,</span></span>
<span class="r-in"><span>    lat <span class="op">=</span> <span class="op">-</span><span class="fl">25</span>,</span></span>
<span class="r-in"><span>    lon <span class="op">=</span> <span class="fl">130</span>,</span></span>
<span class="r-in"><span>    n_stations <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>'max_temp' and 'min_temp' not detected, returning NAs for mean daily 'temp'</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     times   station yearday       lat      lon  state     wd_rw</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                    &lt;POSc&gt;    &lt;char&gt;   &lt;int&gt;     &lt;num&gt;    &lt;num&gt; &lt;char&gt;     &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    1: 2023-04-01 00:00:00 w_STATION      91 -19.89674 147.9869     SA 303.05002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2: 2023-04-01 01:00:00 w_STATION      91 -19.89674 147.9869     SA 303.05002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    3: 2023-04-01 02:00:00 w_STATION      91 -19.89674 147.9869     SA 303.05002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    4: 2023-04-01 03:00:00 w_STATION      91 -19.89674 147.9869     SA 303.05002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    5: 2023-04-01 04:00:00 w_STATION      91 -19.89674 147.9869     SA 303.05002</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ---                                                                          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5829: 2023-11-29 20:00:00 w_STATION     333 -19.89674 147.9869     SA 247.95358</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5830: 2023-11-29 21:00:00 w_STATION     333 -19.89674 147.9869     SA 247.95358</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5831: 2023-11-29 22:00:00 w_STATION     333 -19.89674 147.9869     SA 247.95358</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5832: 2023-11-29 23:00:00 w_STATION     333 -19.89674 147.9869     SA 247.95358</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5833: 2023-11-30 00:00:00 w_STATION     334 -19.89674 147.9869     SA  67.58693</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       wd_sd_rw     ws_rw  ws_sd_rw rain_freq distance    rh  rain  temp</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;num&gt;     &lt;num&gt;     &lt;num&gt;     &lt;num&gt;    &lt;num&gt; &lt;num&gt; &lt;int&gt; &lt;num&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    1: 78.18055  3.682944 10.011768 0.0659163 1933.846    NA     0    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2: 78.18055  3.682944 10.011768 0.0659163 1933.846    NA     0    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    3: 78.18055  3.682944 10.011768 0.0659163 1933.846    NA     0    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    4: 78.18055  3.682944 10.011768 0.0659163 1933.846    NA     0    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    5: 78.18055  3.682944 10.011768 0.0659163 1933.846    NA     0    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ---                                                                  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5829: 55.64306 56.564044 10.791610 0.2640204 1933.846    NA     0    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5830: 55.64306 56.564044 10.791610 0.2640204 1933.846    NA     0    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5831: 55.64306 56.564044 10.791610 0.2640204 1933.846    NA     0    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5832: 55.64306 56.564044 10.791610 0.2640204 1933.846    NA     0    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5833: 73.84805 34.334943  9.999803 0.2522567 1933.846    NA     0    NA</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             ws        wd    wd_sd  YYYY    MM    DD    hh    mm</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          &lt;num&gt;     &lt;num&gt;    &lt;num&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    1: 17.04809 303.05002 78.18055  2023     4     1     0     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    2: 17.04809 303.05002 78.18055  2023     4     1     1     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    3: 17.04809 303.05002 78.18055  2023     4     1     2     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    4: 17.04809 303.05002 78.18055  2023     4     1     3     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    5: 17.04809 303.05002 78.18055  2023     4     1     4     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   ---                                                          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5829: 45.39426 247.95358 55.64306  2023    11    29    20     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5830: 45.39426 247.95358 55.64306  2023    11    29    21     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5831: 45.39426 247.95358 55.64306  2023    11    29    22     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5832: 45.39426 247.95358 55.64306  2023    11    29    23     0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5833: 40.35103  67.58693 73.84805  2023    11    30     0     0</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Paul Melloy.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

